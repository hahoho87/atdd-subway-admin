     ## Step3 - 구간 추가 기능
---

## 미션 설명

- 지하철 구간 추가 기능 구현

### 기능 요구사항

- `요구사항 설명` 에서 제공되는 인수 조건을 기반으로 지하철 구간 추가 기능 구현
- 인수 조건을 검증하는 인수테스트 작성
- 예외 케이스에 대한 검증 포함

### 프로그래밍 요구사항

- 인수 조건 정의
- 인수 조건을 검증하는 인수 테스트 작성
    - 인수 조건은 인수 테스트 메서드 상단에 주석으로 작성
- 인수 테스트를 충족하는 기능 구현
- 인수 테스트 격리
- 인수 테스트 리팩토링

### API 명세

```http request
POST /lines/1/sections HTTP/1.1
accept: */*
content-type: application/json; charset=UTF-8
host: localhost:52165

{
    "downStationId": "4",
    "upStationId": "2",
    "distance": 10
}
```

### 미션 요구사항
- 지하철 구간 등록
  - [ ] 역 사이에 새로운 역을 등록
  - [ ] 새로운 역을 상행 종점으로 등록
  - [ ] 새로운 역을 하행 종점으로 등록
- 구간 등록 시 예외 케이스 고려
  - [ ] 역 사이에 새로운 역을 등록 할 경우 기존 역 사이 길이보다 긴 거리를 등록할 수 없음
  - [ ] 상행역과 하행역이 이미 노선에 모두 등록되어 있는 경우 추가할 수 없음
  - [ ] 상행역과 하행역 둘 중 하나도 포함되어 있지 않은 경우 추가할 수 없음

### 구현 기능 목록
- [ ] 구간 Entity 설계
  - [ ] Line - 구간 - Station 연관관계 설정
- [ ] 구간 일급 컬렉션 생성
  - [ ] `@Embeddable` 사용
- [ ] 구간 추가 기능 구현
  - [ ] 상행 종점 추가
  - [ ] 하행 종점 추가
  - [ ] 중간 역 추가
  - [ ] 예외 케이스
    - [ ] 중간 역 추가 시 기존 역 사이 길이보다 긴 경우
    - [ ] 상행역과 하행역이 이미 노선에 모두 등록되어 있는 경우
    - [ ] 상행역과 하행역 둘 중 하나도 포함되어 있지 않은 경우
- [ ] 구간 추가 기능 인수 테스트 작성
- [ ] 구간 추가 기능 테스트 리팩토링
